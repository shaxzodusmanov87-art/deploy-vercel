{"version":3,"sources":["../../../../components/PostForm.tsx/__nextjs-internal-proxy.mjs","../../../../app/blog/posts/new/page.tsx","../../../../.next-internal/server/app/blog/posts/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/PostForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/PostForm.tsx\",\n    \"default\",\n);\n","import { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/auth\";\nimport prisma from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\n\nimport PostForm from \"@/components/PostForm\";\n\ninterface SessionUser {\n  id: string;\n  name?: string | null;\n  email?: string | null;\n  image?: string | null;\n}\n\ninterface Session {\n  user: SessionUser;\n}\n\nexport default async function NewPost() {\n  const session = (await getServerSession(authOptions)) as Session | null;\n\n  if (!session) return \"Sign in to create a post\";\n\n  async function createPost(formData: FormData) {\n    \"use server\";\n\n    const session = (await getServerSession(authOptions)) as Session | null;\n    if (!session) throw new Error(\"Not authenticated\");\n\n    const title = formData.get(\"title\") as string;\n    const content = formData.get(\"content\") as string;\n\n    await prisma.post.create({\n      data: {\n        title,\n        content,\n        authorId: session.user.id, \n      },\n    });\n\n    revalidatePath(\"/blog/posts\");\n    redirect(\"/blog/posts\");\n  }\n\n  return (\n    <PostForm \n      action={createPost}\n      mode=\"create\"\n    />\n  );\n}\n","export {$$RSC_SERVER_ACTION_0 as '4058cb1550a73c5e01ff460fbe0cfc99195988d508'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"6CAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,yRAA2R,EACxT,wDACA,6DAHW,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qQAAuQ,EACpS,oCACA,+ICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,WAkBE,EAAA,eAAe,AAAW,CAAkB,EAG1C,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAA,WAAW,EACnD,GAAI,CAAC,EAAS,MAAM,AAAI,MAAM,qBAE9B,IAAM,EAAQ,EAAS,GAAG,CAAC,SACrB,EAAU,EAAS,GAAG,CAAC,UAE7B,OAAM,EAAA,OAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CACvB,KAAM,OACJ,EACA,UACA,SAAU,EAAQ,IAAI,CAAC,EACzB,AAD2B,CAE7B,GAEA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,eACf,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,cACX,EAxBa,eAAe,WACX,AAEjB,IAAI,CAAC,CAFkB,CAAA,EAAA,EAAA,GAET,aAFS,AAAgB,EAAC,EAAA,WAAW,EA0BjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAQ,CAAA,CACP,OAvBJ,CAuBY,CACR,KAAK,WA1BY,0BA6BvB,+BA3BE,EAAA,6CAAA,gFCxBF,IAAA,EAAA,EAAA,CAAA,CAAA","ignoreList":[0]}