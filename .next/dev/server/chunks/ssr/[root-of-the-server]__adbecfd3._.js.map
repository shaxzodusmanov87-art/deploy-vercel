{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/lib/prisma.ts"],"sourcesContent":["// import { PrismaClient } from \"../app/generated/prisma/client\";\n// import { PrismaPg } from \"@prisma/adapter-pg\";\n\n// const globalForPrisma = global as unknown as {\n// \tprisma: PrismaClient;\n// };\n\n// const adapter = new PrismaPg({\n// \tconnectionString: process.env.DATABASE_URL,\n// });\n\n// const prisma =\n// \tglobalForPrisma.prisma ||\n// \tnew PrismaClient({\n// \t\tadapter,\n// \t});\n\n// if (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n\n// export default prisma;\n\n// lib/prisma.ts\n// import { PrismaClient } from \"@prisma/client\";\n\n// const globalForPrisma = global as unknown as { prisma: PrismaClient };\n\n// const prisma = globalForPrisma.prisma || new PrismaClient();\n\n// if (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n\n// export default prisma;\n\n\nimport { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: [\"query\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n\nexport default prisma;\n"],"names":[],"mappings":"AAAA,iEAAiE;AACjE,iDAAiD;AAEjD,iDAAiD;AACjD,yBAAyB;AACzB,KAAK;AAEL,iCAAiC;AACjC,+CAA+C;AAC/C,MAAM;AAEN,iBAAiB;AACjB,6BAA6B;AAC7B,sBAAsB;AACtB,aAAa;AACb,OAAO;AAEP,8EAA8E;AAE9E,yBAAyB;AAEzB,gBAAgB;AAChB,iDAAiD;AAEjD,yEAAyE;AAEzE,+DAA+D;AAE/D,8EAA8E;AAE9E,yBAAyB;;;;;;;AAGzB;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/app/api/auth/%5B...nextauth%5D/auth.ts"],"sourcesContent":["import { PrismaAdapter } from \"@next-auth/prisma-adapter\";\nimport { type NextAuthOptions } from \"next-auth\";\n\nimport GitHub from \"next-auth/providers/github\";\nimport Google from \"next-auth/providers/google\";\nimport Credentials from \"next-auth/providers/credentials\";\n\nimport prisma from \"@/lib/prisma\";\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n\n  session: {\n    strategy: \"database\",\n  },\n\n  providers: [\n    GitHub({\n      clientId: process.env.GITHUB_ID!,\n      clientSecret: process.env.GITHUB_SECRET!,\n    }),\n\n    Google({\n      clientId: process.env.GOOGLE_ID!,\n      clientSecret: process.env.GOOGLE_SECRET!,\n    }),\n\n    Credentials({\n      name: \"Dotlabs\",\n      credentials: {\n        username: { label: \"Username\", type: \"text\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n\n      async authorize(credentials) {\n        if (!credentials) return null;\n\n        // тестовый пользователь (можно заменить на реальную проверку)\n        return {\n          id: \"test-user-1\",\n          name: \"Shakhzod Usmanov\",\n          email: \"shakhzodusmanov@example.com\",\n        };\n      },\n    }),\n  ],\n  callbacks: {\n       \n    async session({ session, user }) {\n      session.user = {\n        ...(session.user as any),\n        id: (user as any).id,\n        name: (user as any).name\n        // добавил name\n      }\n      \n      console.log(user.id)\n      console.log(user.name)\n\n      return session;\n    },\n  \n    \n  }\n};\n"],"names":[],"mappings":";;;;AAAA;AAGA;AACA;AACA;AAEA;;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,qLAAa,EAAC,wHAAM;IAE7B,SAAS;QACP,UAAU;IACZ;IAEA,WAAW;QACT,IAAA,8JAAM,EAAC;YACL,UAAU,QAAQ,GAAG,CAAC,SAAS;YAC/B,cAAc,QAAQ,GAAG,CAAC,aAAa;QACzC;QAEA,IAAA,8JAAM,EAAC;YACL,UAAU,QAAQ,GAAG,CAAC,SAAS;YAC/B,cAAc,QAAQ,GAAG,CAAC,aAAa;QACzC;QAEA,IAAA,mKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAO;gBAC5C,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YAEA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,OAAO;gBAEzB,8DAA8D;gBAC9D,OAAO;oBACL,IAAI;oBACJ,MAAM;oBACN,OAAO;gBACT;YACF;QACF;KACD;IACD,WAAW;QAET,MAAM,SAAQ,EAAE,OAAO,EAAE,IAAI,EAAE;YAC7B,QAAQ,IAAI,GAAG;gBACb,GAAI,QAAQ,IAAI;gBAChB,IAAI,AAAC,KAAa,EAAE;gBACpB,MAAM,AAAC,KAAa,IAAI;YAE1B;YAEA,QAAQ,GAAG,CAAC,KAAK,EAAE;YACnB,QAAQ,GAAG,CAAC,KAAK,IAAI;YAErB,OAAO;QACT;IAGF;AACF"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/components/PostForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/PostForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/PostForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","ignoreList":[0]}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/components/PostForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/PostForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/PostForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuQ,GACpS,qCACA","ignoreList":[0]}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/app/blog/posts/%5Bid%5D/edit/page.tsx"],"sourcesContent":["import { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/auth\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nimport PostForm from \"@/components/PostForm\";\r\n\r\nexport default async function EditPost({ params }: { params: Promise<{ id: string }> }) {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session) return \"Not allowed\";\r\n  \r\n    const { id } = await params;\r\n  \r\n    const postId = Number(id);   // ID поста у тебя числовой — это норма\r\n    const userId = session.user.id; // А вот user.id — всегда строка UUID\r\n  \r\n    const post = await prisma.post.findUnique({\r\n      where: { id: postId },\r\n    });\r\n  \r\n    if (!post) return \"Post not found\";\r\n    if (post.authorId !== userId) return \"Not your post\";\r\n  \r\n    async function updatePost(formData: FormData) {\r\n      \"use server\";\r\n  \r\n      const title = formData.get(\"title\") as string;\r\n      const content = formData.get(\"content\") as string;\r\n  \r\n      await prisma.post.update({\r\n        where: { id: postId },\r\n        data: { title, content },\r\n      });\r\n  \r\n      revalidatePath(\"/blog/posts\");\r\n      redirect(\"/blog/posts\");\r\n    }\r\n  \r\n    return (\r\n      <PostForm\r\n        action={updatePost}\r\n        mode=\"edit\"\r\n        initialTitle={post.title}\r\n        initialContent={post.content}\r\n      />\r\n    );\r\n  }\r\n  "],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;;;;;;;;;;MAkBI,wBAAA,eAAe,mCAAW,QAAkB;;IAG1C,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,UAAU,SAAS,GAAG,CAAC;IAE7B,MAAM,wHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACvB,OAAO;YAAE,EAAE;QAAS;QACpB,MAAM;YAAE;YAAO;QAAQ;IACzB;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,iMAAQ,EAAC;AACX;+OAbA;AAhBW,eAAe,SAAS,EAAE,MAAM,EAAuC;IAClF,MAAM,UAAU,MAAM,IAAA,yJAAgB,EAAC,+JAAW;IAClD,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IAErB,MAAM,SAAS,OAAO,KAAO,uCAAuC;IACpE,MAAM,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,qCAAqC;IAErE,MAAM,OAAO,MAAM,wHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE,IAAI;QAAO;IACtB;IAEA,IAAI,CAAC,MAAM,OAAO;IAClB,IAAI,KAAK,QAAQ,KAAK,QAAQ,OAAO;QAEtB,aAAf;IAeA,qBACE,8OAAC,kIAAQ;QACP,QAAQ;QACR,MAAK;QACL,cAAc,KAAK,KAAK;QACxB,gBAAgB,KAAK,OAAO;;;;;;AAGlC"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/Archive/.next-internal/server/app/blog/posts/%5Bid%5D/edit/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_0 as '60052bfddedbe4582a47bbfcd45d178d2a8899a5c8'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}